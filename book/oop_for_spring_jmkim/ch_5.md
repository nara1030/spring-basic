5장. 객체 지향 설계 5원칙 - SOLID
=====
* 주방기구: 객체 지향의 4대 특성
* 주방기구를 올바르게 사용하는 법: 객체 지향 설계의 5원칙
- - -
## 목차
1. [SOLID](#SOLID)
	* [SRP](#SRP)
	* [OCP](#OCP)
	* [LSP](#LSP)
	* [ISP](#ISP)
	* [DIP](#DIP)
2. [기타](#기타)
	* [참고문헌](#참고문헌)
	* [결합도와 응집도](#결합도와-응집도)

## SOLID
SOLID는 로버트 C. 마틴이 2000년대 초반 객체 지향 프로그래밍 및 설계의 다섯 가지 기본 원칙으로 제시한 것을 마이클 페더스가 두문자어로 소개한 것으로 아래 5가지 원칙이다.

* SRP(Single Response Principle): 단일 책임 원칙
* OCP(Open Closed Principle): 개방 폐쇄 원칙
* LSP(Liskov Substitution Principle): 리스코프 치환 원칙
* ISP(Interface Segregation Principle): 인터페이스 분리 원칙
* DIP(Dependency Inversion Principle): 의존 역전 원칙

이 원칙들은 응집도는 높이고(High Cohesion), 결합도는 낮추라(Loose Coupling)는 고전 원칙을 객체 지향의 관점에서 재정립한 것이라고 할 수 있다. SOLID는 객체 지향 4대 특성을 발판으로 하고 있으며, 앞으로 언급할 디자인 패턴의 뼈대이며 스프링 프레임워크의 근간이기도 하다. SOLID와 관련한 더 많은 내용은 [다음](#참고문헌)에서 살펴볼 수 있다.

### SRP
> "어떤 클래스를 변경해야 하는 이유는 오직 하나뿐이어야 한다" - 로버트 C. 마틴

쉬운 이해를 돕기 위해 비유적인 예를 하나 들어본다.

<img src="./img/srp_1.jpg" width="300" height="250"></br>

위와 같이 남자 클래스와 그에 의존하는 다양한 클래스를 가정한다. 이와 같이 남자 클래스에 부여된 역할과 책임이 많은 경우 객체 지향에서는 **나쁜 냄새가 난다**고 한다. 예를 들어 어느 날 여자친구와 헤어졌다고 하면 남자는 더 이상 챙길 일 없는 기념일과 대상이 없는 키스하기에 힘들어하게 된다. 거기에 더해 여자 친구 없는 스트레스를 온 세상에 뿌리고 다니니 어머니, 직장 상사, 소대장님까지 피곤한 지경에 이르게 되고야 만다. 따라서 이런 경우에 아래와 같이 역할(책임)을 분리하라는 것이 단일 책임 원칙이다.

<img src="./img/srp_2.jpg" width="500" height="200"></br>

남자라는 하나의 클래스가 **역할과 책임에 따라** 네 개의 클래스로 쪼개진 것을 볼 수 있다. 그리고 역할과 클래스명도 딱 떨어지니 이해하기도 좋다. 이제 여자 친구와 이별하더라도 남자 친구만 상처를 입으면 된다. 여기서는 클래스 분할에 대해서만 이야기했지만 단일 책임 원칙은 속성, 메서드, 패키지, 모듈, 컴포넌트, 프레임워크 등에도 적용할 수 있는 개념이다. 한편 단일 책임 원칙은 잘된 경우보다 잘못된 경우를 살펴보는 것이 이해하기 좋다. 몇 가지 잘못된 사례들을 살펴보자.

* 속성이 SRP를 지키지 않은 경우  
	```java
	class 사람 {
		String 군번;
		// ...
	}
	
	사람 로미오 = new 사람();
	사람 줄리엣 = new 사람();
	줄리엣.군번 = "1573045840";	// 이건?
	```
	* 문제점
		* 사람형 참조 변수 줄리엣이 가진 군번 속성에 값을 할당하거나 읽어오는 코드를 제제할 방법 없음
	* 해결방법
		* 사람 클래스를 남자/여자로 분할하고 남자 클래스에만 군번 속성을 갖도록 리팩토링
		* 두 클래스간 공통점이 많다면 사람 클래스를 상위 클래스로 유지
	* 기타
		* 하나의 속성이 여러 의미를 갖는 경우도 SRP 위반
			* 데이터베이스 테이블에 존재하는 하나의 필드가 토지인 경우 면적을, 건물인 경우 층수를 나타내는 경우
* 메서드가 SRP를 지키지 않은 경우  
	```java
	class 강아지 {
		final static Boolean 수컷 = true;
		final static Boolean 암컷 = false;
		Boolean 성별;
		
		void 소변보다() {
			if(this.성별 == 수컷) {
				// 한쪽 다리를 들고 소변을 본다.
			} else {
				// 뒷다리 두 개를 굽혀 앉은 자세로 소변을 본다.
			}
		}
	}
	```

##### [목차로 이동](#목차)

### OCP
> "소프트웨어 엔티티(클래스, 모듈, 함수 등)는 확장에 대해서는 열려 있어야 하지만 변경에 대해서는 닫혀 있어야 한다" - 로버트 C. 마틴


##### [목차로 이동](#목차)

### LSP


##### [목차로 이동](#목차)

### ISP


##### [목차로 이동](#목차)

### DIP


##### [목차로 이동](#목차)

## 기타

### 결합도와 응집도
좋은 소프트웨어 설계를 위해서는 결합도(coupling)는 낮추고 응집도(cohesion)는 높이는 것이 바람직하다.

* 결합도
	* 모듈(클래스) 간의 상호 의존 정도
	* **결합도가 낮으면** 모듈 간의 상호 의존성이 줄어들어 객체의 재사용이나 수정, 유지보수가 용이
	* 예: 데이터 결합도, 스탬프 결합도, 컨트롤 결합도 등
* 응집도
	* 하나의 모듈 내부에 존재하는 구성 요소들의 기능적 관련성
	* **응집도가 높은 모듈은** 하나의 책임에 집중하고 독립성이 높아져 재사용이나 기능의 수정, 유지보수가 용이
	* 예: 기능 응집도, 순차 응집도, 통신 응집도 등

더 자세한 내용은 토비 이일민님의 [다음 글](http://toby.epril.com/?p=727)을 참고한다.
	
##### [목차로 이동](#목차)

### 참고문헌
* [UML 실전에서는 이것만 쓴다 - 로버트 C. 마틴](https://www.csd.uoc.gr/~hy252/references/UML_for_Java_Programmers-Book.pdf)
* 객체 지향 SW 설계의 원칙 - ZDnet
	* [① 개방-폐쇄 원칙](http://www.zdnet.co.kr/view/?no=00000039134727)
	* [② 사례연구, 단일 책임 원칙](http://www.zdnet.co.kr/view/?no=00000039135552)
	* [③ 인터페이스 분리의 원칙](http://www.zdnet.co.kr/view/?no=00000039139151)

##### [목차로 이동](#목차)